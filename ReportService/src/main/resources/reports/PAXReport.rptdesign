<?xml version="1.0" encoding="UTF-8"?>
<report xmlns="http://www.eclipse.org/birt/2005/design" version="3.2.23" id="1">
    <property name="createdBy">Eclipse BIRT Designer Version 4.6.0.v201606072122</property>
    <property name="units">in</property>
    <property name="iconFile">/templates/blank_report.gif</property>
    <property name="bidiLayoutOrientation">ltr</property>
    <property name="imageDPI">96</property>
    <parameters>
        <scalar-parameter name="Month" id="68">
            <property name="valueType">static</property>
            <property name="dataType">string</property>
            <property name="distinct">true</property>
            <list-property name="selectionList"/>
            <property name="paramType">simple</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="Year" id="69">
            <property name="valueType">static</property>
            <property name="dataType">integer</property>
            <property name="distinct">true</property>
            <list-property name="selectionList"/>
            <property name="paramType">simple</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="Carrier" id="70">
            <property name="valueType">static</property>
            <property name="isRequired">true</property>
            <property name="dataType">string</property>
            <property name="distinct">true</property>
            <list-property name="selectionList"/>
            <property name="paramType">simple</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
        <scalar-parameter name="tenantAirportCode" id="71">
            <property name="valueType">static</property>
            <property name="isRequired">true</property>
            <property name="dataType">string</property>
            <property name="distinct">true</property>
            <simple-property-list name="defaultValue">
                <value type="constant"></value>
            </simple-property-list>
            <list-property name="selectionList"/>
            <property name="paramType">simple</property>
            <property name="concealValue">false</property>
            <property name="controlType">text-box</property>
            <structure name="format">
                <property name="category">Unformatted</property>
            </structure>
        </scalar-parameter>
    </parameters>
    <data-sources>
        <oda-data-source extensionID="org.eclipse.birt.report.data.oda.jdbc" name="Data Source" id="7">
            <list-property name="privateDriverProperties">
                <ex-property>
                    <name>metadataBidiFormatStr</name>
                    <value>ILYNN</value>
                </ex-property>
                <ex-property>
                    <name>disabledMetadataBidiFormatStr</name>
                </ex-property>
                <ex-property>
                    <name>contentBidiFormatStr</name>
                    <value>ILYNN</value>
                </ex-property>
                <ex-property>
                    <name>disabledContentBidiFormatStr</name>
                </ex-property>
            </list-property>
            <property name="odaDriverClass">com.microsoft.sqlserver.jdbc.SQLServerDriver</property>
            <property name="odaURL">jdbc:sqlserver://cosysuatsqldb1server.database.windows.net;databaseName=NGCDEV</property>
            <property name="odaUser">SATsDevUser</property>
            <encrypted-property name="odaPassword" encryptionID="base64">U0B0cyMxNDIx</encrypted-property>
        </oda-data-source>
    </data-sources>
    <data-sets>
        <oda-data-set extensionID="org.eclipse.birt.report.data.oda.jdbc.JdbcSelectDataSet" name="Data Set" id="8">
            <list-property name="columnHints">
                <structure>
                    <property name="columnName">ATA</property>
                    <property name="analysis">dimension</property>
                    <text-property name="displayName">ATA</text-property>
                    <text-property name="heading">ATA</text-property>
                </structure>
                <structure>
                    <property name="columnName">FlightKey</property>
                    <property name="analysis">dimension</property>
                    <text-property name="displayName">FlightKey</text-property>
                    <text-property name="heading">FlightKey</text-property>
                </structure>
                <structure>
                    <property name="columnName">Carrier</property>
                    <property name="analysis">dimension</property>
                    <text-property name="displayName">Carrier</text-property>
                    <text-property name="heading">Carrier</text-property>
                </structure>
                <structure>
                    <property name="columnName">FlightNumber</property>
                    <property name="analysis">dimension</property>
                    <text-property name="displayName">FlightNumber</text-property>
                    <text-property name="heading">FlightNumber</text-property>
                </structure>
                <structure>
                    <property name="columnName">CarrierShortName</property>
                    <property name="analysis">dimension</property>
                    <text-property name="displayName">CarrierShortName</text-property>
                    <text-property name="heading">CarrierShortName</text-property>
                </structure>
                <structure>
                    <property name="columnName">CargoWeight</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">CargoWeight</text-property>
                    <text-property name="heading">CargoWeight</text-property>
                </structure>
                <structure>
                    <property name="columnName">PaxInventoryWeight</property>
                    <property name="analysis">measure</property>
                    <text-property name="displayName">PaxInventoryWeight</text-property>
                    <text-property name="heading">PaxInventoryWeight</text-property>
                </structure>
            </list-property>
            <list-property name="parameters">
                <structure>
                    <property name="name">param_1</property>
                    <property name="paramName">tenantAirportCode</property>
                    <property name="nativeName"></property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">1</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_2</property>
                    <property name="paramName">Month</property>
                    <property name="nativeName"></property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">2</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_3</property>
                    <property name="paramName">Year</property>
                    <property name="nativeName"></property>
                    <property name="dataType">integer</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">3</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_4</property>
                    <property name="paramName">tenantAirportCode</property>
                    <property name="nativeName"></property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">4</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_5</property>
                    <property name="paramName">tenantAirportCode</property>
                    <property name="nativeName"></property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">5</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_6</property>
                    <property name="paramName">tenantAirportCode</property>
                    <property name="nativeName"></property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">6</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
                <structure>
                    <property name="name">param_7</property>
                    <property name="paramName">Carrier</property>
                    <property name="nativeName"></property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">0</property>
                    <property name="position">7</property>
                    <property name="isOptional">false</property>
                    <property name="isInput">true</property>
                    <property name="isOutput">false</property>
                </structure>
            </list-property>
            <structure name="cachedMetaData">
                <list-property name="resultSet">
                    <structure>
                        <property name="position">1</property>
                        <property name="name">ATA</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">2</property>
                        <property name="name">FlightKey</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">3</property>
                        <property name="name">Carrier</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">4</property>
                        <property name="name">FlightNumber</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">5</property>
                        <property name="name">CarrierShortName</property>
                        <property name="dataType">string</property>
                    </structure>
                    <structure>
                        <property name="position">6</property>
                        <property name="name">CargoWeight</property>
                        <property name="dataType">decimal</property>
                    </structure>
                    <structure>
                        <property name="position">7</property>
                        <property name="name">PaxInventoryWeight</property>
                        <property name="dataType">decimal</property>
                    </structure>
                </list-property>
            </structure>
            <property name="dataSource">Data Source</property>
            <list-property name="resultSet">
                <structure>
                    <property name="position">1</property>
                    <property name="name">ATA</property>
                    <property name="nativeName">ATA</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">12</property>
                </structure>
                <structure>
                    <property name="position">2</property>
                    <property name="name">FlightKey</property>
                    <property name="nativeName">FlightKey</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">12</property>
                </structure>
                <structure>
                    <property name="position">3</property>
                    <property name="name">Carrier</property>
                    <property name="nativeName">Carrier</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">12</property>
                </structure>
                <structure>
                    <property name="position">4</property>
                    <property name="name">FlightNumber</property>
                    <property name="nativeName">FlightNumber</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">12</property>
                </structure>
                <structure>
                    <property name="position">5</property>
                    <property name="name">CarrierShortName</property>
                    <property name="nativeName">CarrierShortName</property>
                    <property name="dataType">string</property>
                    <property name="nativeDataType">12</property>
                </structure>
                <structure>
                    <property name="position">6</property>
                    <property name="name">CargoWeight</property>
                    <property name="nativeName">CargoWeight</property>
                    <property name="dataType">decimal</property>
                    <property name="nativeDataType">3</property>
                </structure>
                <structure>
                    <property name="position">7</property>
                    <property name="name">PaxInventoryWeight</property>
                    <property name="nativeName">PaxInventoryWeight</property>
                    <property name="dataType">decimal</property>
                    <property name="nativeDataType">3</property>
                </structure>
            </list-property>
            <xml-property name="queryText"><![CDATA[WITH Flt
AS (
	SELECT leg.Flight_ID FlightId
		,Flt.CarrierCode
		,Flt.FlightNumber
		,Flt.FlightKey
		,Leg.DateSTA
		,Leg.DateATA
		,Flt.FlightOriginDate InboundFlightOriginDate
		,flt.FlightType InboundFlightType
		,leg.DateETA
		,leg.AircraftType
		,leg.FlightBoardPoint InboundFlightBoardPoint
		,Imp_FreightFlightManifestByFlight.ImpFreightFlightManifestByFlightId
		,CASE 
			WHEN AcTyp.AircraftBodyType = 'N'
				THEN 'NARROW'
			ELSE 'WIDE'
			END InboundAircraftBodyType
	FROM Flt_OperativeFlight Flt
	INNER JOIN Flt_OperativeFlight_Legs leg ON leg.Flight_ID = Flt.Flight_ID
	LEFT JOIN Mst_AircraftType AcTyp ON leg.AircraftType = AcTyp.AircraftType
	LEFT JOIN Imp_FreightFlightManifestByFlight ON Imp_FreightFlightManifestByFlight.flightId = Flt.flight_id
	WHERE Leg.FlightOffPoint = ?
		AND (
			(
				Flt.carriercode IN (
					'MU'
					,'CK'
					)
				AND cast(Leg.DATESTA AS DATE) >= '11-DEC-2018'
				)
			OR (
				Flt.carriercode IN (
					'VJ'
					,'PN'
					,'RX'
					)
				AND cast(Leg.DATESTA AS DATE) >= '27-DEC-2018'
				)
			OR (
				Flt.carriercode IN (
					'TG'
					,'BR'
					,'FJ'
					,'LO'
					)
				AND cast(Leg.DATESTA AS DATE) >= '03-JAN-2019'
				)
			OR (
				Flt.carriercode IN (
					'BG'
					,'SL'
					,'OD'
					,'JT'
					,'ID'
					,'HU'
					,'GX'
					,'5J'
					,'3U'
					)
				AND cast(Leg.DATESTA AS DATE) >= '26-FEB-2019'
				)
			OR (
				Flt.carriercode IN (
					'CZ'
					,'CV'
					,'LX'
					,'MF'
					,'NS'
					,'OZ'
					,'QZ'
					,'Z2'
					,'ZH'
					,'FD'
					,'AK'
					,'CA'
					,'JL'
					,'HO'
					)
				AND cast(Leg.DATESTA AS DATE) >= '19-MAR-2019'
				)
			OR (
				Flt.carriercode IN (
					'AI'
					,'7L'
					,'9W'
					,'PR'
					,'IX'
					,'BI'
					,'EY'
					,'ET'
					,'BS'
					,'SV'
					,'BL'
					,'HY'
					)
				AND cast(Leg.DATESTA AS DATE) >= '27-MAR-2019'
				)
			OR (
				Flt.carriercode = '3K'
				AND cast(Leg.DATESTA AS DATE) BETWEEN '27-MAR-2019'
					AND '28-MAR-2019'
				)
			OR (
				Flt.carriercode IN (
					'PX'
					,'VN'
					)
				AND cast(Leg.DATESTA AS DATE) BETWEEN '27-MAR-2019'
					AND '14-APR-2019'
				)
			OR (
				Flt.carriercode = 'UA'
				AND cast(Leg.DATESTA AS DATE) >= '30-APR-2019'
				)
			OR (
				Flt.carriercode = 'TK'
				AND cast(Leg.DATESTA AS DATE) >= '09-MAY-2019'
				)
			OR (
				Flt.carriercode IN (
					'NH'
					,'NQ'
					)
				AND cast(Leg.DATESTA AS DATE) >= '15-MAY-2019'
				)
			OR (
				Flt.carriercode = 'CX'
				AND cast(Leg.DATESTA AS DATE) >= '21-MAY-2019'
				)
			OR (
				Flt.carriercode = 'KE'
				AND cast(Leg.DATESTA AS DATE) >= '28-MAY-2019'
				)
			OR (
				Flt.carriercode = 'VN'
				AND cast(Leg.DATESTA AS DATE) >= '04-JUN-2019'
				)
			OR (
				Flt.carriercode = '3K'
				AND cast(Leg.DATESTA AS DATE) >= '11-JUN-2019'
				)
			OR (
				Flt.carriercode = 'KZ'
				AND cast(Leg.DATESTA AS DATE) >= '12-JUN-2019'
				)
			OR (
				Flt.carriercode = 'FX'
				AND cast(Leg.DATESTA AS DATE) >= '18-JUN-2019'
				)
			OR (
				Flt.carriercode = 'RU'
				AND cast(Leg.DATESTA AS DATE) >= '25-JUN-2019'
				)
			OR (
				Flt.carriercode IN (
					'TH'
					,'N7'
					)
				AND cast(Leg.DATESTA AS DATE) >= '02-JUL-2019'
				)
			OR (
				Flt.carriercode = 'LH'
				AND Cast(Leg.datesta AS DATE) >= '11-JUL-2019'
				)
			OR (
				Flt.carriercode = '8K'
				AND Cast(Leg.datesta AS DATE) >= '16-JUL-2019'
				)
			OR (
				Flt.carriercode = '3S'
				AND Cast(Leg.datesta AS DATE) >= '19-JUL-2019'
				)
			OR (
				Flt.carriercode = 'JQ'
				AND Cast(Leg.datesta AS DATE) >= '29-JUL-2019'
				)
			OR (
				Flt.carriercode = 'QF'
				AND Cast(Leg.datesta AS DATE) >= '29-JUL-2019'
				)
			)
		AND month(leg.DateSTA) = ?
		AND Year(leg.DateSTA) = ?
	)
	,FInSum
AS (
	SELECT ShpVer.FlightId
		,ShpVer.ShipmentId
		,Sum(ShpVer.BreakDownPieces) Pieces
		,Sum(ShpVer.BreakDownWeight) Weight
		,Max(ShpVer.CreatedDateTime) FrtInDate
	FROM Imp_ShipmentVerification ShpVer
	WHERE IsNull(ShpVer.BreakDownPieces, 0) > 0
	GROUP BY ShpVer.FlightId
		,ShpVer.ShipmentId
	)
	,FOutSum
AS (
	SELECT FrtOut.FlightId
		,FrtOut.ShipmentId
		,Sum(FrtOut.Pieces) Pieces
		,Sum(FrtOut.Weight) Weight
	FROM shipment_freightOut FrtOut
	GROUP BY FrtOut.FlightId
		,FrtOut.ShipmentId
	)
	,DO
AS (
	SELECT FrtOut.FlightId
		,FrtOut.ShipmentId
		,IsNull(FrtOut.ShipmentLocation, FrtOut.WarehouseLocation) Location
		,Sum(FrtOut.Pieces) Pieces
		,Sum(FrtOut.Weight) Weight
		,Max(FrtOut.DeliveryRequestIssuedOn) PODate
		,Dlv.DeliveryOrderNo DeliveryOrderNo
		,Max(FrtOut.DeliveredOn) DeliveryDate
		,Dlv.CustomerCode
		,cus.CustomerShortName CustomerName
	FROM shipment_freightOut FrtOut
	INNER JOIN Imp_Delivery Dlv ON Dlv.ShipmentId = FrtOut.ShipmentId
		AND Dlv.ImpDeliveryId = FrtOut.DeliveryOrderNo
	--And IsNULL(dlv.Status,'#') = 'COMPLETED'
	INNER JOIN Customer_master cus ON cus.CustomerCode = Dlv.CustomerCode
	GROUP BY FrtOut.FlightId
		,FrtOut.ShipmentId
		,IsNull(FrtOut.ShipmentLocation, FrtOut.WarehouseLocation)
		,Dlv.DeliveryOrderNo
		,Dlv.CustomerCode
		,cus.CustomerShortName
	
	UNION ALL
	
	SELECT FrtOut.FlightId
		,FrtOut.ShipmentId
		,IsNull(FrtOut.ShipmentLocation, FrtOut.WarehouseLocation) Location
		,Sum(FrtOut.Pieces) Pieces
		,Sum(FrtOut.Weight) Weight
		,Max(FrtOut.DeliveryRequestIssuedOn) PODate
		,Dlv.DeliveryOrderNo DeliveryOrderNo
		,Max(FrtOut.DeliveredOn) DlvDate
		,'IXX' CustomerCode
		,Dlv.CustomerCode CustomerName
	FROM shipment_freightOut FrtOut
	INNER JOIN Imp_Delivery Dlv ON Dlv.ShipmentId = FrtOut.ShipmentId
		AND Dlv.ImpDeliveryId = FrtOut.DeliveryOrderNo
		--And dlv.Status = 'COMPLETED' 
		AND Dlv.CustomerCode NOT IN (
			SELECT CustomerCode
			FROM Customer_master
			)
	GROUP BY FrtOut.FlightId
		,FrtOut.ShipmentId
		,IsNull(FrtOut.ShipmentLocation, FrtOut.WarehouseLocation)
		,Dlv.DeliveryOrderNo
		,CustomerCode
		,Dlv.CustomerCode
	)
	,FinDO
AS (
	SELECT FInSum.FlightId
		,FInSum.ShipmentId
		,FInSum.FrtInDate
		,DO.Location
		,DO.Pieces
		,DO.Weight
		,DO.PODate
		,DO.DeliveryOrderNo
		,DO.DeliveryDate
		,DO.CustomerCode
		,DO.CustomerName
	FROM FInSum
	INNER JOIN FOutSum ON FOutSum.FlightId = FInSum.FlightId
		AND FOutSum.ShipmentId = FInSum.ShipmentId
		AND FOutSum.Weight <= FInSum.Weight
	INNER JOIN Do ON Do.FlightId = FOutSum.FlightId
		AND Do.ShipmentId = FOutSum.ShipmentId
	
	UNION ALL
	
	SELECT FInSum.FlightId
		,FInSum.ShipmentId
		,FInSum.FrtInDate
		,'' Location
		,FInSum.Pieces
		,FInSum.Weight
		,'' PODate
		,'' DeliveryOrderNo
		,'' DeliveryDate
		,'' CustomerCode
		,'' CustomerName
	FROM FInSum
	INNER JOIN Flt ON flt.FlightId = FInSum.FlightId
	WHERE NOT EXISTS (
			SELECT 1
			FROM FOutSum
			WHERE FOutSum.FlightId = FInSum.FlightId
				AND FOutSum.ShipmentId = FInSum.ShipmentId
			)
	
	UNION ALL
	
	SELECT FInSum.FlightId
		,FInSum.ShipmentId
		,FInSum.FrtInDate
		,'' Location
		,(FInSum.Pieces - FOutSum.Pieces) Pieces
		,(FInSum.Weight - FOutSum.Weight) Weight
		,'' PODate
		,'' DeliveryOrderNo
		,'' DeliveryDate
		,'' CustomerCode
		,'' CustomerName
	FROM FInSum
	INNER JOIN FOutSum ON FOutSum.FlightId = FInSum.FlightId
		AND FOutSum.ShipmentId = FInSum.ShipmentId
		AND FOutSum.Weight <= FInSum.Weight
		AND (FInSum.Weight - FOutSum.Weight) > 0
	
	UNION ALL
	
	SELECT FInSum.FlightId
		,FInSum.ShipmentId
		,Max(FInSum.FrtInDate)
		,Max(DO.Location) Location
		,Max(FInSum.Pieces) Pieces
		,Max(FInSum.Weight) Weight
		,Max(DO.PODate) PODate
		,Max(DO.DeliveryOrderNo) DeliveryOrderNo
		,Max(DO.DeliveryDate) DeliveryDate
		,Max(DO.CustomerCode) CustomerCode
		,Max(DO.CustomerName) CustomerName
	FROM FInSum
	INNER JOIN FOutSum ON FOutSum.FlightId = FInSum.FlightId
		AND FOutSum.ShipmentId = FInSum.ShipmentId
		AND FOutSum.Weight > FInSum.Weight
	LEFT JOIN Do ON Do.FlightId = FOutSum.FlightId
		AND Do.ShipmentId = FOutSum.ShipmentId
	GROUP BY FInSum.FlightId
		,FInSum.ShipmentId
	)
	,FOutSHC
AS (
	SELECT Shc.FlightId
		,Shc.ShipmentId
		,Shc.Location
		,Shc.DeliveryOrderNo
		,STRING_AGG(Shc.SpecialHandlingCode, ',') SpecialHandlingCode
		,Max(CASE 
				WHEN SpecialHandlingCode IN (
						'RCX'
						,'REX'
						,'RXB'
						,'RXB'
						,'RXC'
						,'RXD'
						,'RXE'
						,'RXG'
						,'RXS'
						,'RFG'
						,'RNG'
						,'RPG'
						,'RFL'
						,'RFS'
						,'RSC'
						,'RFW'
						,'ROX'
						,'ROP'
						,'RPB'
						,'RIS'
						,'RRW'
						,'RRY'
						,'RCM'
						,'RSB'
						,'RMD'
						,'RLI'
						,'RLM'
						,'RCL'
						,'DGR'
						,'DGD'
						,'RGX'
						,'RRE'
						,'ROP'
						,'RDS'
						,'RCS'
						,'RDG'
						,'RXE'
						,'RXG'
						)
					THEN 1
				ELSE 0
				END) DGR
		,Max(CASE 
				WHEN Shc.SpecialHandlingCode IN (
						'PHC'
						,'PES'
						,'PEF'
						,'EAT'
						,'PEP'
						,'FRI'
						,'FRO'
						,'LHO'
						,'PEM'
						,'PER'
						,'PIL'
						)
					THEN 1
				ELSE 0
				END) PER
		,Max(CASE 
				WHEN Shc.SpecialHandlingCode IN ('BUP')
					THEN 1
				ELSE 0
				END) BUP
		,Max(CASE 
				WHEN Shc.SpecialHandlingCode IN ('RAC')
					THEN 1
				ELSE 0
				END) EXP
		,Max(CASE 
				WHEN SpecialHandlingCode IN ('BUC')
					THEN 1
				ELSE 0
				END) BUC
		,Max(CASE 
				WHEN SpecialHandlingCode IN ('GEN')
					THEN 1
				ELSE 0
				END) GENIndicator
	FROM (
		SELECT b.FlightId
			,b.ShipmentId
			,IsNull(b.ShipmentLocation, b.WarehouseLocation) location
			,c.DeliveryOrderNo
			,a.SpecialHandlingCode
		FROM shipment_freightoutShc a
		INNER JOIN shipment_freightout b ON b.ShipmentFreightOutId = a.ShipmentFreightOutId
		INNER JOIN Imp_Delivery c ON c.ShipmentId = b.ShipmentId
			AND c.ImpDeliveryId = b.DeliveryOrderNo
		GROUP BY b.FlightId
			,b.ShipmentId
			,IsNull(b.ShipmentLocation, b.WarehouseLocation)
			,c.DeliveryOrderNo
			,a.SpecialHandlingCode
		) Shc
	GROUP BY Shc.FlightId
		,Shc.ShipmentId
		,Shc.Location
		,Shc.DeliveryOrderNo
	)
	,FInOut
AS (
	SELECT FinDO.FlightId
		,FinDO.ShipmentId
		,FinDO.FrtInDate
		,FinDO.Location
		,FinDO.Pieces
		,FinDO.Weight
		,FinDO.PODate
		,FinDO.DeliveryOrderNo
		,FinDO.DeliveryDate
		,FinDO.CustomerCode
		,FinDO.CustomerName
		,FOutSHC.SpecialHandlingCode
		,FOutSHC.DGR
		,FOutSHC.PER
		,FOutSHC.BUP
		,FOutSHC.EXP
		,FOutSHC.BUC
		,FOutSHC.GENIndicator
	FROM FinDO
	LEFT JOIN FOutSHC ON FOutSHC.FlightId = FinDO.FlightId
		AND FOutSHC.ShipmentId = FinDO.ShipmentId
		AND IsNull(FOutSHC.Location, '#') = IsNull(FinDO.Location, '#')
		AND IsNull(FOutSHC.DeliveryOrderNo, '#') = IsNull(FinDO.DeliveryOrderNo, '#')
	)
	,TTH
AS (
	SELECT bkgDtl.FlightId
		,bkg.ShipmentNumber
		,bkg.ShipmentDate
		,Max(bkgDtl.transfertype) TransferType
	FROM Exp_ShipmentFlightBookingDetail bkgDtl
	INNER JOIN Exp_ShipmentBooking bkg ON bkg.BookingId = bkgDtl.BookingId
	WHERE IsNull(bkgDtl.BookingCancellationFlag, 0) = 0
	GROUP BY bkgDtl.FlightId
		,bkg.ShipmentNumber
		,bkg.ShipmentDate
	)
	,CneAgt
AS (
	SELECT sc.ShipmentId
		,sc.CustomerCode ConsigneeCode
		,sc.CustomerName ConsigneeName
		,cm.CustomerCode AgentCode
		,cm.CustomerShortName AgentName
	FROM Shipment_MasterCustomerInfo sc
	LEFT JOIN Customer_master cm ON cm.Customer_ID = sc.AppointedAgent
	WHERE sc.CustomerType = 'CNE'
	)
	,Shipper
AS (
	SELECT sc.ShipmentId
		,sc.CustomerCode ShipperCode
		,sc.CustomerName ShipperName
	FROM Shipment_MasterCustomerInfo sc
	LEFT JOIN Customer_master cm ON cm.Customer_ID = sc.AppointedAgent
	WHERE sc.CustomerType = 'SHP'
	)
	,SHCMst
AS (
	SELECT mst.ShipmentId
		,STRING_AGG(SpecialHandlingCode, ',') SpecialHandlingCode
		,Max(CASE 
				WHEN SpecialHandlingCode IN (
						'RCX'
						,'REX'
						,'RXB'
						,'RXB'
						,'RXC'
						,'RXD'
						,'RXE'
						,'RXG'
						,'RXS'
						,'RFG'
						,'RNG'
						,'RPG'
						,'RFL'
						,'RFS'
						,'RSC'
						,'RFW'
						,'ROX'
						,'ROP'
						,'RPB'
						,'RIS'
						,'RRW'
						,'RRY'
						,'RCM'
						,'RSB'
						,'RMD'
						,'RLI'
						,'RLM'
						,'RCL'
						,'DGR'
						,'DGD'
						,'RGX'
						,'RRE'
						,'ROP'
						,'RDS'
						,'RCS'
						,'RDG'
						,'RXE'
						,'RXG'
						)
					THEN 1
				ELSE 0
				END) DGR
		,Max(CASE 
				WHEN SpecialHandlingCode IN (
						'PHC'
						,'PES'
						,'PEF'
						,'EAT'
						,'PEP'
						,'FRI'
						,'FRO'
						,'LHO'
						,'PEM'
						,'PER'
						,'PIL'
						)
					THEN 1
				ELSE 0
				END) PER
		,Max(CASE 
				WHEN SpecialHandlingCode = 'BUP'
					THEN 1
				ELSE 0
				END) BUP
		,Max(CASE 
				WHEN SpecialHandlingCode = 'RAC'
					THEN 1
				ELSE 0
				END) EXP
		,Max(CASE 
				WHEN SpecialHandlingCode = 'BUC'
					THEN 1
				ELSE 0
				END) BUC
		,Max(CASE 
				WHEN SpecialHandlingCode = 'GEN'
					THEN 1
				ELSE 0
				END) GENIndicator
	FROM Shipment_MasterSHC shc
	INNER JOIN Shipment_Master mst ON mst.ShipmentId = shc.ShipmentId
	GROUP BY mst.ShipmentId
	)
	,FinData
AS (
	SELECT convert(VARCHAR(16), flt.DateSTA, 120) FreightInArrival_ATA
		,flt.DateETA
		,Flt.FlightId
		,Flt.FlightKey
		,flt.InboundAircraftBodyType
		,Flt.InboundFlightBoardPoint
		,flt.InboundFlightOriginDate
		,flt.InboundFlightType
		,(
			CASE 
				WHEN Flt.ImpFreightFlightManifestByFlightId IS NOT NULL
					THEN 'YES'
				ELSE 'NO'
				END
			) AS FFM
		,sm.ShipmentNumber
		,sm.ShipmentId
		,sm.ShipmentDate
		,sm.shipmentType
		,Shipper.ShipperCode
		,Shipper.ShipperName
		,convert(VARCHAR(16), flt.DateSTA, 120) STADateTime
		,car.CarrierShortName
		,flt.CarrierCode ArrivalFlightCarrier
		,flt.FlightNumber ArrivalFlightNumber
		,SubString(sm.ShipmentNumber, 1, 3) AWBPrefix
		,SubString(sm.ShipmentNumber, 4, 8) AWBNumber
		,sm.Origin
		,sm.Destination
		,convert(VARCHAR(20), DATEADD(hour, 8, FInOut.FrtInDate), 120) FreightInDateTime
		,CASE 
			WHEN (
					FInOut.DGR = 1
					OR SHCMst.DGR = 1
					)
				THEN 'Y'
			ELSE 'N'
			END DGR
		,CASE 
			WHEN (
					FInOut.PER = 1
					OR SHCMst.PER = 1
					)
				THEN 'Y'
			ELSE 'N'
			END PERISHABLES
		,CASE 
			WHEN (
					FInOut.BUP = 1
					OR SHCMst.BUP = 1
					)
				THEN 'Y'
			ELSE 'N'
			END "BUP OR NON"
		,CASE 
			WHEN (
					FInOut.EXP = 1
					OR SHCMst.EXP = 1
					)
				THEN 'Y'
			ELSE 'N'
			END EXPRESS
		,CASE 
			WHEN (
					FInOut.BUC = 1
					OR SHCMst.BUC = 1
					)
				THEN 'Y'
			ELSE 'N'
			END BUC
		,CASE 
			WHEN (
					FInOut.GENIndicator = 1
					OR SHCMst.GENIndicator = 1
					)
				THEN 'Y'
			ELSE 'N'
			END GENIndicator
		,
		--DONumber, 
		-- DOPrintDateTime,
		IsNull(SHCMst.SpecialHandlingCode, '.') SpecialHandlingCode
		,IsNull(CneAgt.AgentCode, '.') IssuingAgentCode
		,IsNull(CneAgt.AgentName, '.') IssuingAgentName
		,
		--'.' PickOrderDateTime, 										
		IsNull(CneAgt.ConsigneeName, '.') ConsigneeName
		,IsNull(CneAgt.ConsigneeCode, '.') ConsigneeCode
		,TTH.TransferType TransferType
		,'N' Transhipment
		,FInOut.Weight SumWeight
		,FInOut.Pieces SumPieces
		,IsNull(sm.NatureOfGoodsDescription, '.') NOG
		,CASE 
			WHEN (
					FInOut.PER = 1
					OR SHCMst.PER = 1
					)
				THEN 'COOLPORT'
			WHEN (
					FInOut.EXP = 1
					OR SHCMst.EXP = 1
					)
				THEN 'EXPRESS'
			WHEN Car.CarrierCode IN (
					'SQ'
					,'MI'
					,'TR'
					,'N7'
					,'TH'
					,'RU'
					,'8K'
					,'3S'
					,'NZ'
					)
				THEN 'SQ Import'
			ELSE 'OAL Import'
			END CostCentre
		,CAST(DATEADD(hour, 8, FInOut.FrtInDate) AS DATE) FreightIn
		,IsNull(FInOut.Location, '.') Location
		,CASE 
			WHEN Substring(FInOut.Location, 1, 3) IN (
					SELECT UldType
					FROM Uld_UldType
					)
				THEN Substring(FInOut.Location, 1, 3)
			ELSE 'BULK'
			END UlDType
		,CASE 
			WHEN Substring(FInOut.Location, 1, 3) IN (
					SELECT UldType
					FROM Uld_UldType
					)
				THEN Substring(FInOut.Location, 4, 10)
			ELSE '.'
			END UlDNumber
		,flt.AircraftType AircraftType
		,IsNull(CONVERT(VARCHAR(16), DATEADD(hour, 8, FInOut.DeliveryDate), 120), '.') FreightOutDateTime
	FROM Shipment_Master sm
	INNER JOIN FInOut ON FInOut.ShipmentId = sm.ShipmentId
	INNER JOIN Flt ON Flt.FlightId = FInOut.FlightId
	INNER JOIN Mst_carrier Car ON Car.CarrierCode = Flt.CarrierCode
	LEFT JOIN TTH ON TTH.flightId = FInOut.FlightId
		AND TTH.ShipmentNumber = sm.ShipmentNumber
		AND TTH.ShipmentDate = sm.ShipmentDate
	LEFT JOIN SHCMst ON SHCMst.ShipmentId = FInOut.ShipmentId
	LEFT JOIN CneAgt ON CneAgt.ShipmentId = FInOut.ShipmentId
	LEFT JOIN Shipper ON Shipper.ShipmentId = FInOut.ShipmentId
	WHERE sm.Destination = ?
		--And sm.ShipmentType != 'MAIL'											
		AND sm.CancelledOn IS NULL
	
	UNION ALL
	
	SELECT convert(VARCHAR(16), flt.DateSTA, 120) FreightInArrival_ATA
		,flt.DateETA
		,Flt.FlightId
		,Flt.FlightKey
		,flt.InboundAircraftBodyType
		,Flt.InboundFlightBoardPoint
		,flt.InboundFlightOriginDate
		,flt.InboundFlightType
		,(
			CASE 
				WHEN Flt.ImpFreightFlightManifestByFlightId IS NOT NULL
					THEN 'YES'
				ELSE 'NO'
				END
			) AS FFM
		,sm.ShipmentNumber
		,sm.ShipmentId
		,sm.ShipmentDate
		,sm.shipmentType
		,Shipper.ShipperCode
		,Shipper.ShipperName
		,convert(VARCHAR(16), flt.DateSTA, 120) STADateTime
		,car.CarrierShortName
		,flt.CarrierCode ArrivalFlightCarrier
		,flt.FlightNumber ArrivalFlightNumber
		,SubString(sm.ShipmentNumber, 1, 3) AWBPrefix
		,SubString(sm.ShipmentNumber, 4, 8) AWBNumber
		,sm.Origin
		,sm.Destination
		,IsNull(convert(VARCHAR(20), DATEADD(hour, 8, FInSum.FrtInDate), 120), '.') FreightInDateTime
		,CASE 
			WHEN SHCMst.DGR = 1
				THEN 'Y'
			ELSE 'N'
			END DGR
		,CASE 
			WHEN SHCMst.PER = 1
				THEN 'Y'
			ELSE 'N'
			END PERISHABLES
		,CASE 
			WHEN SHCMst.BUP = 1
				THEN 'Y'
			ELSE 'N'
			END "BUP OR NON"
		,CASE 
			WHEN SHCMst.EXP = 1
				THEN 'Y'
			ELSE 'N'
			END EXPRESS
		,CASE 
			WHEN SHCMst.BUC = 1
				THEN 'Y'
			ELSE 'N'
			END BUC
		,CASE 
			WHEN SHCMst.GENIndicator = 1
				THEN 'Y'
			ELSE 'N'
			END GENIndicator
		,
		--DONumber, 
		-- DOPrintDateTime,
		IsNull(SHCMst.SpecialHandlingCode, '.') SpecialHandlingCode
		,IsNull(CneAgt.AgentCode, '.') IssuingAgentCode
		,IsNull(CneAgt.AgentName, '.') IssuingAgentName
		,
		--'.' PickOrderDateTime, 										
		IsNull(CneAgt.ConsigneeName, '.') ConsigneeName
		,IsNull(CneAgt.ConsigneeCode, '.') ConsigneeCode
		,TTH.TransferType TransferType
		,'Y' Transhipment
		,FInSum.Weight SumWeight
		,FInSum.Pieces SumPieces
		,IsNull(sm.NatureOfGoodsDescription, '.') NOG
		,CASE 
			WHEN SHCMst.PER = 1
				THEN 'COOLPORT'
			WHEN SHCMst.EXP = 1
				THEN 'EXPRESS'
			WHEN Car.CarrierCode IN (
					'SQ'
					,'MI'
					,'TR'
					,'N7'
					,'TH'
					,'RU'
					,'8K'
					,'3S'
					,'NZ'
					)
				THEN 'SQ Import'
			ELSE 'OAL Import'
			END CostCentre
		,CAST(FInSum.FrtInDate AS DATE) FreightIn
		,'.' Location
		,'.' UlDType
		,'.' UlDNumber
		,flt.AircraftType AircraftType
		,IsNull(CONVERT(VARCHAR(16), DATEADD(hour, 8, FInSum.FrtInDate), 120), '.') FreightOutDateTime
	FROM Shipment_Master sm
	INNER JOIN FInSum ON FInSum.ShipmentId = sm.ShipmentId
	INNER JOIN Flt ON Flt.FlightId = FInSum.FlightId
	INNER JOIN Mst_carrier Car ON Car.CarrierCode = Flt.CarrierCode
	LEFT JOIN TTH ON TTH.flightId = FInSum.FlightId
		AND TTH.ShipmentNumber = sm.ShipmentNumber
		AND TTH.ShipmentDate = sm.ShipmentDate
	LEFT JOIN SHCMst ON SHCMst.ShipmentId = FInSum.ShipmentId
	LEFT JOIN CneAgt ON CneAgt.ShipmentId = FInSum.ShipmentId
	LEFT JOIN Shipper ON Shipper.ShipmentId = FInSum.ShipmentId
	WHERE sm.Origin != ?
		AND sm.Destination != ?
		--And sm.ShipmentType != 'MAIL'											
		AND sm.CancelledOn IS NULL
	)
SELECT FreightInArrival_ATA AS ATA
	,
	--AircraftType	as	InboundAicraftType 	,
	FlightKey
	,ArrivalFlightCarrier AS Carrier
	,ArrivalFlightNumber AS FlightNumber
	,
	--AWBNumber	as	[AWB number]	,
	--AWBPrefix	as	[AWB prefix] 	,
	--"BUP OR NON"	as	BUPFLAG 	,
	--BUC As BUCFLAG,
	CarrierShortName AS CarrierShortName
	,
	--ConsigneeCode	as	ConsigneeCode 	,
	--ConsigneeName	as	ConsigneeName 	,
	--CostCentre	as	CostCentre	,
	--Destination	as	Destination 	,
	--DGR	as	DgFLAG	,
	--EXPRESS	as	ECCFLAG	,
	--FlightId	as	FlightID 	,
	--FreightIn	as	FreightIn	,
	--FreightInArrival_ATA	as	DateATA 	,
	--FreightInDateTime	as	FreightInDateTime	,
	--FreightOutDateTime	as	FreightOutDateTime	,
	--InboundAircraftBodyType	as	InboundAircraftBodyType 	,
	--InboundFlightBoardPoint	as	InboundFlightBoardPoint 	,
	--InboundFlightOriginDate	as	InboundFlightOriginDate 	,
	--InboundFlightType	as	InboundFlightType 	,
	--IssuingAgentCode	as	IssuingAgentCode 	,
	--IssuingAgentName	as	IssuingAgentName	,
	--Location	as	Location,
	--null	as	HandlingAreaCode 	,
	--NOG	as	NatureOfGoodsDescription 	,
	--Origin	as	Origin 	,
	--PERISHABLES	as	PhcFLAG	,
	--ShipmentDate	as	ShipmentDate	,
	--ShipmentNumber	as	ShipmentNumber 	,
	--shipmentType	as	shipmentType 	,
	--ShipperCode	as	ShipperCode 	,
	--ShipperName	as	ShipperName 	,
	--ShipmentId	as	ShipmentId 	,
	--SpecialHandlingCode	as	SpecialHandlingCode 	,
	--STADateTime	as	DateSTA 	,
	--SumPieces	as	BreakdownPiece 	,
	SumWeight AS TotalWeight
	,CASE 
		WHEN InboundFlightType = 'C'
			THEN SumWeight
		ELSE 0
		END AS CargoWeight
	,CASE 
		WHEN InboundFlightType = 'P'
			THEN SumWeight
		ELSE 0
		END AS PaxInventoryWeight
FROM finData
WHERE finData.ArrivalFlightCarrier = ?
ORDER BY ShipmentId;]]></xml-property>
            <xml-property name="designerValues"><![CDATA[<?xml version="1.0" encoding="UTF-8"?>
<model:DesignValues xmlns:design="http://www.eclipse.org/datatools/connectivity/oda/design" xmlns:model="http://www.eclipse.org/birt/report/model/adapter/odaModel">
  <Version>2.0</Version>
  <design:ResultSets derivedMetaData="true">
    <design:resultSetDefinitions>
      <design:resultSetColumns>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>ATA</design:name>
              <design:position>1</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>12</design:nativeDataTypeCode>
            <design:precision>4000</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Nullable</design:nullability>
            <design:uiHints>
              <design:displayName>ATA</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>ATA</design:label>
            <design:formattingHints>
              <design:displaySize>4000</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>FlightKey</design:name>
              <design:position>2</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>12</design:nativeDataTypeCode>
            <design:precision>8</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>NotNullable</design:nullability>
            <design:uiHints>
              <design:displayName>FlightKey</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>FlightKey</design:label>
            <design:formattingHints>
              <design:displaySize>8</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>Carrier</design:name>
              <design:position>3</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>12</design:nativeDataTypeCode>
            <design:precision>3</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>NotNullable</design:nullability>
            <design:uiHints>
              <design:displayName>Carrier</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>Carrier</design:label>
            <design:formattingHints>
              <design:displaySize>3</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>FlightNumber</design:name>
              <design:position>4</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>12</design:nativeDataTypeCode>
            <design:precision>5</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>NotNullable</design:nullability>
            <design:uiHints>
              <design:displayName>FlightNumber</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>FlightNumber</design:label>
            <design:formattingHints>
              <design:displaySize>5</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>CarrierShortName</design:name>
              <design:position>5</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>12</design:nativeDataTypeCode>
            <design:precision>65</design:precision>
            <design:scale>0</design:scale>
            <design:nullability>Nullable</design:nullability>
            <design:uiHints>
              <design:displayName>CarrierShortName</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>CarrierShortName</design:label>
            <design:formattingHints>
              <design:displaySize>65</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>CargoWeight</design:name>
              <design:position>6</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>3</design:nativeDataTypeCode>
            <design:precision>38</design:precision>
            <design:scale>1</design:scale>
            <design:nullability>Nullable</design:nullability>
            <design:uiHints>
              <design:displayName>CargoWeight</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>CargoWeight</design:label>
            <design:formattingHints>
              <design:displaySize>40</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
        <design:resultColumnDefinitions>
          <design:attributes>
            <design:identifier>
              <design:name>PaxInventoryWeight</design:name>
              <design:position>7</design:position>
            </design:identifier>
            <design:nativeDataTypeCode>3</design:nativeDataTypeCode>
            <design:precision>38</design:precision>
            <design:scale>1</design:scale>
            <design:nullability>Nullable</design:nullability>
            <design:uiHints>
              <design:displayName>PaxInventoryWeight</design:displayName>
            </design:uiHints>
          </design:attributes>
          <design:usageHints>
            <design:label>PaxInventoryWeight</design:label>
            <design:formattingHints>
              <design:displaySize>40</design:displaySize>
            </design:formattingHints>
          </design:usageHints>
        </design:resultColumnDefinitions>
      </design:resultSetColumns>
      <design:criteria/>
    </design:resultSetDefinitions>
  </design:ResultSets>
</model:DesignValues>]]></xml-property>
        </oda-data-set>
    </data-sets>
    <cubes>
        <tabular-cube name="Data Cube" id="9">
            <property name="dimensions">
                <tabular-dimension name="FlightDate" id="10">
                    <property name="defaultHierarchy">NewTabularHierarchy</property>
                    <property name="hierarchies">
                        <tabular-hierarchy name="NewTabularHierarchy" id="11">
                            <property name="levels">
                                <tabular-level name="ATA" id="12">
                                    <property name="dataType">string</property>
                                    <property name="columnName">ATA</property>
                                </tabular-level>
                            </property>
                        </tabular-hierarchy>
                    </property>
                </tabular-dimension>
                <tabular-dimension name="Carrier" id="13">
                    <property name="defaultHierarchy">NewTabularHierarchy1</property>
                    <property name="hierarchies">
                        <tabular-hierarchy name="NewTabularHierarchy1" id="14">
                            <property name="levels">
                                <tabular-level name="Carrier" id="15">
                                    <property name="dataType">string</property>
                                    <property name="columnName">Carrier</property>
                                </tabular-level>
                            </property>
                        </tabular-hierarchy>
                    </property>
                </tabular-dimension>
                <tabular-dimension name="FlightNumber" id="16">
                    <property name="defaultHierarchy">NewTabularHierarchy2</property>
                    <property name="hierarchies">
                        <tabular-hierarchy name="NewTabularHierarchy2" id="17">
                            <property name="levels">
                                <tabular-level name="FlightNumber" id="18">
                                    <property name="dataType">string</property>
                                    <property name="columnName">FlightNumber</property>
                                </tabular-level>
                            </property>
                        </tabular-hierarchy>
                    </property>
                </tabular-dimension>
            </property>
            <property name="measureGroups">
                <tabular-measure-group name="Summary Field" id="19">
                    <property name="measures">
                        <tabular-measure name="PaxInventoryWeight" id="20">
                            <expression name="measureExpression" type="javascript">dataSetRow["PaxInventoryWeight"]</expression>
                            <property name="dataType">decimal</property>
                        </tabular-measure>
                    </property>
                </tabular-measure-group>
            </property>
            <property name="dataSet">Data Set</property>
        </tabular-cube>
    </cubes>
    <styles>
        <style name="report" id="4">
            <property name="fontFamily">sans-serif</property>
            <property name="fontSize">10pt</property>
            <structure name="dateTimeFormat">
                <property name="category">Custom</property>
                <property name="pattern">ddMMMYYYY</property>
            </structure>
        </style>
        <style name="crosstab" id="5">
            <property name="borderBottomColor">#CCCCCC</property>
            <property name="borderBottomStyle">solid</property>
            <property name="borderBottomWidth">1pt</property>
            <property name="borderLeftColor">#CCCCCC</property>
            <property name="borderLeftStyle">solid</property>
            <property name="borderLeftWidth">1pt</property>
            <property name="borderRightColor">#CCCCCC</property>
            <property name="borderRightStyle">solid</property>
            <property name="borderRightWidth">1pt</property>
            <property name="borderTopColor">#CCCCCC</property>
            <property name="borderTopStyle">solid</property>
            <property name="borderTopWidth">1pt</property>
        </style>
        <style name="crosstab-cell" id="6">
            <property name="borderBottomColor">#CCCCCC</property>
            <property name="borderBottomStyle">solid</property>
            <property name="borderBottomWidth">1pt</property>
            <property name="borderLeftColor">#CCCCCC</property>
            <property name="borderLeftStyle">solid</property>
            <property name="borderLeftWidth">1pt</property>
            <property name="borderRightColor">#CCCCCC</property>
            <property name="borderRightStyle">solid</property>
            <property name="borderRightWidth">1pt</property>
            <property name="borderTopColor">#CCCCCC</property>
            <property name="borderTopStyle">solid</property>
            <property name="borderTopWidth">1pt</property>
        </style>
    </styles>
    <page-setup>
        <simple-master-page name="Simple MasterPage" id="2"/>
    </page-setup>
    <body>
        <extended-item extensionName="Crosstab" extensionVersion="3.7.0" id="21">
            <property name="cube">Data Cube</property>
            <property name="measures">
                <extended-item extensionName="MeasureView" id="38">
                    <property name="measure">PaxInventoryWeight</property>
                    <property name="detail">
                        <extended-item extensionName="AggregationCell" id="39">
                            <property name="aggregationOnRow">FlightDate/ATA</property>
                            <property name="aggregationOnColumn">FlightNumber/FlightNumber</property>
                            <property name="content">
                                <data id="40">
                                    <structure name="numberFormat">
                                        <property name="category">Currency</property>
                                        <property name="pattern">###0.00{RoundingMode=HALF_UP}</property>
                                    </structure>
                                    <property name="resultSetColumn">PaxInventoryWeight_FlightDate/ATA_FlightNumber/FlightNumber</property>
                                </data>
                            </property>
                        </extended-item>
                    </property>
                    <property name="aggregations">
                        <extended-item extensionName="AggregationCell" id="53">
                            <property name="aggregationOnRow">FlightDate/ATA</property>
                            <property name="aggregationOnColumn">Carrier/Carrier</property>
                            <property name="content">
                                <data id="54">
                                    <structure name="numberFormat">
                                        <property name="category">Currency</property>
                                        <property name="pattern">###0.00{RoundingMode=HALF_UP}</property>
                                    </structure>
                                    <property name="resultSetColumn">PaxInventoryWeight_FlightDate/ATA_Carrier/Carrier_1</property>
                                </data>
                            </property>
                        </extended-item>
                        <extended-item extensionName="AggregationCell" id="59">
                            <property name="aggregationOnColumn">Carrier/Carrier</property>
                            <property name="content">
                                <data id="60">
                                    <structure name="numberFormat">
                                        <property name="category">Currency</property>
                                        <property name="pattern">###0.00{RoundingMode=HALF_UP}</property>
                                    </structure>
                                    <property name="resultSetColumn">PaxInventoryWeight_Carrier/Carrier</property>
                                </data>
                            </property>
                        </extended-item>
                        <extended-item extensionName="AggregationCell" id="61">
                            <property name="aggregationOnColumn">FlightNumber/FlightNumber</property>
                            <property name="content">
                                <data id="62">
                                    <structure name="numberFormat">
                                        <property name="category">Currency</property>
                                        <property name="pattern">###0.00{RoundingMode=HALF_UP}</property>
                                    </structure>
                                    <property name="resultSetColumn">PaxInventoryWeight_FlightNumber/FlightNumber</property>
                                </data>
                            </property>
                        </extended-item>
                    </property>
                    <property name="header">
                        <extended-item extensionName="CrosstabCell" id="41"/>
                        <extended-item extensionName="CrosstabCell" id="55"/>
                    </property>
                </extended-item>
            </property>
            <property name="rows">
                <extended-item extensionName="CrosstabView" id="23">
                    <property name="grandTotal">
                        <extended-item extensionName="CrosstabCell" id="58">
                            <property name="content">
                                <label id="63">
                                    <property name="eventHandlerClass">com.ngen.cosys.report.event.LabelEventHandler</property>
                                    <text-property name="text">export.sub.total.lowercase</text-property>
                                </label>
                            </property>
                        </extended-item>
                    </property>
                    <property name="views">
                        <extended-item extensionName="DimensionView" id="24">
                            <property name="dimension">FlightDate</property>
                            <property name="levels">
                                <extended-item extensionName="LevelView" name="NewLevel View" id="25">
                                    <property name="level">FlightDate/ATA</property>
                                    <property name="member">
                                        <extended-item extensionName="CrosstabCell" id="26">
                                            <property name="content">
                                                <data name="ATA" id="27">
                                                    <property name="backgroundColor">#666699</property>
                                                    <property name="resultSetColumn">ATA</property>
                                                </data>
                                            </property>
                                        </extended-item>
                                    </property>
                                </extended-item>
                            </property>
                        </extended-item>
                    </property>
                    <property name="grandTotalLocation">after</property>
                </extended-item>
            </property>
            <property name="columns">
                <extended-item extensionName="CrosstabView" id="46">
                    <property name="views">
                        <extended-item extensionName="DimensionView" id="28">
                            <property name="dimension">Carrier</property>
                            <property name="levels">
                                <extended-item extensionName="LevelView" name="NewLevel View1" id="29">
                                    <property name="level">Carrier/Carrier</property>
                                    <property name="member">
                                        <extended-item extensionName="CrosstabCell" id="30">
                                            <property name="content">
                                                <data name="Carrier" id="32">
                                                    <property name="backgroundColor">#666699</property>
                                                    <property name="resultSetColumn">Carrier</property>
                                                </data>
                                            </property>
                                        </extended-item>
                                    </property>
                                    <property name="aggregationHeader">
                                        <extended-item extensionName="CrosstabCell" id="52">
                                            <property name="content">
                                                <label id="56">
                                                    <property name="eventHandlerClass">com.ngen.cosys.report.event.LabelEventHandler</property>
                                                    <text-property name="text">g.total</text-property>
                                                </label>
                                            </property>
                                        </extended-item>
                                    </property>
                                </extended-item>
                            </property>
                        </extended-item>
                        <extended-item extensionName="DimensionView" id="33">
                            <property name="dimension">FlightNumber</property>
                            <property name="levels">
                                <extended-item extensionName="LevelView" name="NewLevel View2" id="34">
                                    <property name="level">FlightNumber/FlightNumber</property>
                                    <property name="member">
                                        <extended-item extensionName="CrosstabCell" id="35">
                                            <property name="content">
                                                <data name="FlightNumber" id="37">
                                                    <property name="backgroundColor">#666699</property>
                                                    <property name="resultSetColumn">FlightNumber</property>
                                                </data>
                                            </property>
                                        </extended-item>
                                    </property>
                                </extended-item>
                            </property>
                        </extended-item>
                    </property>
                    <property name="grandTotalLocation">after</property>
                </extended-item>
            </property>
            <property name="header">
                <extended-item extensionName="CrosstabCell" id="48">
                    <property name="content">
                        <label id="49">
                            <property name="eventHandlerClass">com.ngen.cosys.report.event.LabelEventHandler</property>
                            <text-property name="text">g.carrier</text-property>
                        </label>
                    </property>
                </extended-item>
                <extended-item extensionName="CrosstabCell" id="50">
                    <property name="content">
                        <label id="51">
                            <property name="eventHandlerClass">com.ngen.cosys.report.event.LabelEventHandler</property>
                            <text-property name="text">customs.flight.number</text-property>
                        </label>
                    </property>
                </extended-item>
                <extended-item extensionName="CrosstabCell" id="22"/>
            </property>
            <list-property name="boundDataColumns">
                <structure>
                    <property name="name">ATA</property>
                    <expression name="expression" type="javascript">dimension["FlightDate"]["ATA"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">Carrier</property>
                    <expression name="expression">dimension["Carrier"]["Carrier"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">FlightNumber</property>
                    <expression name="expression">dimension["FlightNumber"]["FlightNumber"]</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">PaxInventoryWeight_FlightNumber/FlightNumber</property>
                    <expression name="expression">measure["PaxInventoryWeight"]</expression>
                    <property name="dataType">float</property>
                    <simple-property-list name="aggregateOn">
                        <value>FlightNumber/FlightNumber</value>
                    </simple-property-list>
                    <property name="aggregateFunction">SUM</property>
                </structure>
                <structure>
                    <property name="name">PaxInventoryWeight_FlightNumber/FlightNumber_Carrier/Carrier</property>
                    <expression name="expression">measure["PaxInventoryWeight"]</expression>
                    <property name="dataType">decimal</property>
                    <simple-property-list name="aggregateOn">
                        <value>FlightNumber/FlightNumber</value>
                        <value>Carrier/Carrier</value>
                    </simple-property-list>
                    <property name="aggregateFunction">SUM</property>
                </structure>
                <structure>
                    <property name="name">PaxInventoryWeight_FlightDate/ATA_Carrier/Carrier</property>
                    <expression name="expression">measure["PaxInventoryWeight"]</expression>
                    <property name="dataType">decimal</property>
                    <simple-property-list name="aggregateOn">
                        <value>FlightDate/ATA</value>
                        <value>Carrier/Carrier</value>
                    </simple-property-list>
                    <property name="aggregateFunction">SUM</property>
                </structure>
                <structure>
                    <property name="name">PaxInventoryWeight_FlightDate/ATA_FlightNumber/FlightNumber</property>
                    <expression name="expression">measure["PaxInventoryWeight"]</expression>
                    <property name="dataType">decimal</property>
                    <simple-property-list name="aggregateOn">
                        <value>FlightDate/ATA</value>
                        <value>FlightNumber/FlightNumber</value>
                    </simple-property-list>
                    <property name="aggregateFunction">SUM</property>
                </structure>
                <structure>
                    <property name="name">PaxInventoryWeight_FlightDate/ATA_Carrier/Carrier_1</property>
                    <expression name="expression">measure["PaxInventoryWeight"]</expression>
                    <property name="dataType">float</property>
                    <simple-property-list name="aggregateOn">
                        <value>FlightDate/ATA</value>
                        <value>Carrier/Carrier</value>
                    </simple-property-list>
                    <property name="aggregateFunction">sum</property>
                </structure>
                <structure>
                    <property name="name">Carrier_TOTAL</property>
                    <expression name="expression">dimension["Carrier"]["Carrier"]+" TOTAL"</expression>
                    <property name="dataType">string</property>
                </structure>
                <structure>
                    <property name="name">PaxInventoryWeight_Carrier/Carrier</property>
                    <expression name="expression">measure["PaxInventoryWeight"]</expression>
                    <property name="dataType">float</property>
                    <simple-property-list name="aggregateOn">
                        <value>Carrier/Carrier</value>
                    </simple-property-list>
                    <property name="aggregateFunction">SUM</property>
                </structure>
            </list-property>
        </extended-item>
    </body>
</report>
